%YAML 1.2
---

Op_e:
  base: OperatorTemplate
  equations:
    - "d/dt * r = delta/(PI * tau**2) + 2.*r*v/tau"
    - "r_exc = r + r_e"
    - "d/dt * v = (v**2 + eta + inp) / tau + k_ee * r_exc * (1.0 - tanh(e)) - k_ei * r_i - tau*(PI*r)**2"
    - "d/dt * e = a"
    - "d/dt * a = alpha*r_exc/tau_a - 2.0*a/tau_a - e/tau_a**2"
  variables:
    r:
      default: output
    v:
      default: variable
    e:
      default: variable
    a:
      default: variable
    r_e:
      default: input
    r_i:
      default: input
    tau:
      default: 1.0
    tau_a:
      default: 10.0
    delta:
      default: 2.0
    eta:
      default: -3.0
    alpha:
      default: 0.0
    k_ee:
      default: 21.2132
    k_ei:
      default: 21.2132
    inp:
      default: input

Op_i:
  base: OperatorTemplate
  equations:
    - "d/dt * r = delta/(PI * tau**2) + 2.*r*v/tau"
    - "d/dt * v = (v**2 + eta + inp) / tau - k_ii * (r + r_i) + k_ie * (1.0 - tanh(e)) * r_e - tau*(PI*r)**2"
    - "d/dt * e = a"
    - "d/dt * a = alpha*r_e/tau_a - 2.0*a/tau_a - e/tau_a**2"
  variables:
    r:
      default: output
    v:
      default: variable
    e:
      default: variable
    a:
      default: variable
    r_e:
      default: input
    r_i:
      default: input
    tau:
      default: 1.0
    tau_a:
      default: 10.0
    delta:
      default: 2.0
    eta:
      default: -5.0
    alpha:
      default: 0.0
    k_ie:
      default: 21.2132
    k_ii:
      default: 21.2132
    inp:
      default: input

Pop_e:
  base: NodeTemplate
  operators:
    - Op_e

Pop_i:
  base: NodeTemplate
  operators:
    - Op_i

DummyEdge:
  base: EdgeTemplate
  operators: []

EI_Circuit:
  base: CircuitTemplate
  nodes:
    E: Pop_e
    I: Pop_i
  edges:
    - [E/Op_e/r, I/Op_i/r_e, DummyEdge, {weight: 1.0}]
    - [I/Op_i/r, E/Op_e/r_i, DummyEdge, {weight: 1.0}]